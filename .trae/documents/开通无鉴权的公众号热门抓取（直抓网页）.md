## 目标

* 去除接口鉴权限制，提供直接网页抓取的公开接口，数据源为 `https://dajiala.com/main/`。

* 公开接口仍具备限流与缓存，保证稳定与安全。

## 后端方案

* 新增公开路由前缀：`/api/wechat-public/*`，不使用鉴权中间件。

* 路由：

  * `GET /api/wechat-public/explodes?limit=20`

  * `GET /api/wechat-public/quality-accounts?limit=20`

  * `GET /api/wechat-public/hot-articles?limit=20`

  * `GET /api/wechat-public/overview`

* 采集逻辑复用现有 `DajialaCrawlerService`（已支持直取+无头浏览器回退）：

  * 直取失败自动启用 Puppeteer 加载 `/main/`，滚动并等待渲染后解析列表

  * Redis 缓存：默认 TTL 10 分钟（`DAJIALA_CACHE_TTL` 可调）

* 安全与稳定：

  * 单独限流器（更严格）：每 5 分钟 30 次/每 IP

  * 响应永不回退模拟数据；失败返回空数组与错误码 `FETCH_FAILED`

  * 不持久化 Cookie，不注入登录态

## 前端方案

* 在 `src/services/api.ts` 增加 `wechatPublicAPI`（与现有 wechatAPI 同签名）：

  * `explodes/qualityAccounts/hotArticles/overview` 调用 `/api/wechat-public/*`

* 页面 `WeChatDiscovery` 支持无登录场景：

  * 优先调用 `wechatPublicAPI`，若失败再尝试已登录接口（向后兼容）

* 交互：Loading/Empty/Error 提示不变；打开原文按钮保持现状。

## 配置与依赖

* `PUPPETEER_EXECUTABLE_PATH` 已配置；如环境走 `puppeteer-core` 则使用该路径。

* `DAJIALA_CACHE_TTL`（可选）：修改缓存时间。

## 验证

* 未登录状态访问 `/api/wechat-public/overview` 返回三块数据。

* 前端 `/wechat` 页面在未登录时也能正常展示三块内容。

## 实施步骤

1. 新增 `api/routes/wechat-public.ts`，注册四个公开接口并挂载到 `app.ts`。
2. 在 `app.ts` 为 `/api/wechat-public` 增加专用限流中间件。
3. 前端新增 `wechatPublicAPI` 并调整 `WeChatDiscovery` 调用顺序。
4. 联调与日志检查，确认直取与回退路径正常。

## 风险与缓解

* 站点结构变更：我们已做关键词匹配与容器回溯；必要时再加类名选择器适配。

* 反爬门槛提高：延长等待、控制抓取频率、必要时添加代理开关（默认关闭）。

